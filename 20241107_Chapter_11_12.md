# 20241107 
### Chapter 11. CPU 스케줄링
### Chapter 12. 프로세스 동기화

---

질문자 : 이강현

답변자 : 양지웅, 최은혜, 오유진

범위 : [혼자 공부하는 컴퓨터 구조 + 운영체제] 11장 ~ 12장

---

### Q1. CPU 스케줄링에 대해 아는 만큼 설명해주세요

최은혜 : CPU는 한번에 하나의 프로세스만 실행할 수 있어서 스케줄링이 필요합니다. 이 때 CPU가 먼저 필요한 프로세스와 입출력장치가 필요한 프로세스간의 차이가 있습니다. 이 두 프로세스를 하나로 묶어서 처리하게 된다면 자원 낭비가 심하기 때문에 CPU 스케줄링을 사용합니다.

양지웅 : 모든 프로세스가 이용하는 자원은 CPU이기 때문에 순서대로 사용하기 위한 스케줄링이 필요합니다. 단순하게는 먼저 온 프로세스나 스레드를 실행시키면 될 것 같지만 긴 작업 시간을 가진 프로세스가 실행하게 된다면 뒤의 프로세스들은 실행 시간까지 오래 걸린다는 단점이 있고, 잠시만 CPU를 사용하면 되는 입출력장치 중점 프로세스와 같은 것들을 먼저 실행시키는게 효율적이기 때문에 스케줄링이 필요합니다. 대표적으로 선점형, 비선점으로 나눌 수 있습니다.

오유진 : 하나의 CPU는 하나의 프로세스만 실행시킬 수 있습니다. 이때 실행시킬 때, 우선순위를 두고 실행시키는 방법이 있고 들어온 순서대로 실행시키는 방법도 있습니다. 이때 실행시키는 방법을 CPU 스케줄링이라고 하고, 입출력장치 중점 프로세스와 CPU 장치 프로세스 두가지로 나눌 수 있습니다.

> 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것

### Q2. 10장에서 배운 프로세스가 어떻게 생성이 되는지부터 종료가 되는 시점까지 큐를 추가해서 설명해주세요 (hint. 준비 큐, 대기 큐)

오유진 : 프로세스 생성 후 준비 큐에 들어가고 CPU를 할당 받고 실행을 하다 대기 큐에 들어가 대기 상태가 되고, 입출력이 끝나면 준비 큐에 들어가 준비상태가 됩니다. 이런 과정을 반복하다가 할 일이 끝난다면 종료 상태가 됩니다.

양지웅 : 프로세스가 생성이 완료가 되고 준비 상태에 들어가게 되는데, CPU를 할당 받아 실행해야 하지만 CPU가 실행 중이라면 준비 큐에 들어가게 됩니다. 할당 받아 실행 상태가 되고 완료가 된다면 종료 상태가 되고 완료가 되지 못하거나, 입출력장치가 필요하다면 그에 알맞은 준비 큐에 들어가게 되고, 다시 준비 상태가 되어 CPU 할당을 기다리는 방식을 반복합니다.

최은혜 : 프로세스가 생성되고 TCB가 생기고 생성 상태가 됩니다. CPU가 사용 중이라면 해당 자원에 맞는 준비 큐에 들어가고 준비 상태가 됩니다. 준비 큐 안에 있는 프로세스의 순서가 되면 그 프로세스가 실행 상태가 되고 실행 상태에서 입출력장치 사용이 필요하다면 해당 입출력장치의 대기 큐에 들어가 대기 상태가 됩니다. 대기 상태에서 입출력장치의 사용이 끝난다면 준비 큐에 들어가고 이러한 과정을 반복하다가 프로세스가 종료되면 종료 상태가 됩니다.

> 프로세스가 생성이 되고 준비 큐에 들어가 준비 상태가 됩니다. 이후 CPU를 할당 받아 실행 상태가 되는데(디스패치) 실행을 하다가 입출력 요청이 생긴다면 대기 큐에 들어가 대기 상태가 되고 입출력이 완료되면 다시 준비 큐에 들어가 준비 상태가 됩니다. 실행 상태 중에 할당 받은 시간이 끝나 타이머 인터럽트가 발생되면 다시 준비 큐에 들어가기도 합니다. 이러한 과정을 반복하다가 작업이 끝나 프로세스가 종료되면 종료 상태로 접어들게 됩니다.

### Q3. 선점형 스케줄링과 비선점형 스케줄링에 대해 간단히 설명해주시고 각각의 장단점을 설명해주세요

최은혜 : 선점형 스케줄링은 다른 프로세스가 사용 중인 자원을 뺏어 사용할 수 있는 것이고, 뺏지 못하고 계속 기다려야 하는 것을 비선점형 스케줄링이라고 합니다. 선점형 스케줄링을 하게 된다면 자원을 효율적으로 사용할 수 있지만 조건에 맞지 않는 프로세스들은 계속 뒤로 밀리는 기아 현상이 발생할 수 있습니다. 비선점형 스케줄링은 모든 자원들이 계속 실행될 수 있지만 문맥 교환이 적게 일어날 수 있다는 장점이 있습니다. 하지만 짧게 사용해도 되는 프로세스가 오랜 대기 시간을 가질 수 있다는 단점을 가지고 있습니다.

오유진 : 선점형 스케줄링이란 한 프로세스가 실행을 하고 있는데 다른 프로세스가 할당된 자원을 뺏어 사용할 수 있는 것입니다. 비선점형 스케줄링은 실행하고 있는 프로세스가 종료할 때까지 기다리거나 대기 상태로 될 때까지 기다려야하는 스케줄링입니다. 선점형 스케줄링은 자원을 효과적으로 사용할 수 있다는 장점이 있고, 단점으로는 기아 현상이 발생할 수 있다는 것이 있습니다. 비선점형 스케줄링은 문맥 교환이 자주 일어나지 않는다는 장점이 있지만 오랜 대기 시간을 가진다는 단점이 있습니다.

양지웅 : 선점형 스케줄링이란 우선순위가 높은 프로세스가 온다면 실행 중인 프로세스의 자원을 뺏어 실행시킬 수 있는 방법이고, 비선점형 스케줄링은 끼어드는 것을 허용하지 않는 방법입니다. 선점형 스케줄링은 우선순위가 높은 프로세스를 먼저 실행시킬 수 있다는 장점이 있지만, 상대적으로 컨텍스트 스위칭이 자주 일어나 CPU 소모가 많이 된다는 점과, 기아 현상이 일어날 수 있다는 단점이 있습니다. 비선점형 같은 경우 중간에 끼어들 수 없기 때문에 기아 현상도 적게 일어나고 컨텍스트 스위칭도 적지만, 우선순위가 높은 작업을 바로 실행할 수 없다는 단점이 있습니다.

> 선점형 스케줄링 - 급한 프로세스가 끼어들게 되어 자원을 배분 받아 작업을 진행. 이는 한 프로세스의 자원 독점을 막기도 하며 골고루 프로세스에 자원을 배분할 수 있다는 장점이 있지만, 컨텍스트 스위칭(문맥 교환) 과정에서 오버헤드가 발생할 수 있다는 단점이 있습니다.

> 비선점형 스케줄링 - 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 대기 상태가 될 때까지 끼어들 수 없는 스케줄링. 컨텍스트 스위칭 과정이 선점형보다 적어 오버헤드가 적다는 장점이 있지만, 당장 자원을 사용해야 하는 상황에도 무작정 기다려야하고 모든 프로세스가 골고루 자원을 사용할 수 없다는 단점이 있습니다.

### Q4. CPU 스케줄링 알고리즘에는 대표적으로 FCFS(First Come First Scheduling), SJF(Shortest Job First) (최단 작업 우선 스케줄링), RR(Round Robin) 스케줄링, SRT(Shortest Remaining Time) 스케줄링이 있습니다. 이에 대해 겹치지 않게 설명해주세요

양지웅 : 라운드로빈의 경우 기존의 스케줄링 방법과 유사하지만 하나의 프로세스가 너무 오랫동안 CPU를 사용할 수 있기 때문에 나온 걔념으로 타임 슬라이스라는 개념을 사용합니다. 일정 시간동안 프로세스가 실행되게 하고 이후에는 일정 시간동안 다른 프로세스가 자원을 이용하게 하는 방법입니다.

최은혜 : FCFS는 먼저 들어온 프로세스부터 순서대로 자원을 할당하는 비선점형 스케줄링입니다. 이 경우 기아 현상이 발생할 수 있다는 단점이 있습니다.

오유진 : SJF는 가장 짧은 작업 시간을 가진 프로세스부터 실행하는 선점형 스케줄링입니다.

> FCFS - 먼저 온게 먼저 스케줄링, SJF - 시간이 적게 걸리는 것 먼저 스케줄링, RR - 공평한 시간으로 스케줄링, SRT - 남은 시간이 제일 적은 것 먼저 스케줄링
> 우선순위가 낮아 계속해서 자원을 못 받는 현상 - 기아 현상, 에이징(우선순위를 점차 높여나가는 기법)으로 해결

### Q5. 실행 순서 제어를 위한 동기화, 상호 배제를 위한 동기화, 공유 자원 및 임계 구역에 대해 하나씩 설명해주세요

오유진 : 공유 자원은 프로세스들이 동시에 사용하는 자원들을 의미합니다. 이 때, 임계 구역은 여러개의 프로세스가 동시에 사용할 수 없는 구역으로 하나의 프로세스가 독립적으로 사용해야 하는 구역을 의미합니다.

양지웅 : 실행 순서 제어를 위한 동기화는 실행 순서가 맞지 않으면 정상적으로 작동하지 않는 경우를 예방하기 위해 동기화를 하는 것입니다. 대표적인 예로 파일을 읽을 때 저장되어 있지 않으면 읽을 수가 없기 때문에 아무것도 저장되지 않은 상태에서 write 먼저 실행한 후 read를 실행하는 경우를 이야기합니다.

최은혜 : 상호 배제를 위한 동기화는 공유가 불가능한 부분을 동시에 사용하는 것을 피하려고 사용하는 알고리즘입니다.

> 실행 순서 제어를 위한 동기화 - 동시에 실행되는 프로세스를 올바른 순서대로 실행하는 것

> 상호 배제를 위한 동기화 - 공유가 불가능한 자원의 동시 사용을 피하기 위해 사용하는 알고리즘(접근하지 못하게 함)

> 공유 자원 - 동시에 접근해서는 안 되는 자원 (ex. 잔액, 총합), 임계 구역 - 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역

### Q6. 뮤텍스 락, 세마포, 모니터에 대해 설명해주세요

최은혜 : 뮤텍스 락이란 자물쇠 역할을 합니다. 자원을 사용하려고 할 때 프로세스가 '나 지금 이 자원 사용할거야'하며 뮤텍스 락을 사용해 잠금을 진행합니다. acquire를 통해 lock을 진행하고 release를 통해 lock을 해제합니다.

오유진 : 세마포는 철도에서 신호를 보내는 것에서 유래가 된건데, 이 프로세스를 사용해도 되는지 신호로 전달하는 것입니다. wait이라는 것은 잠시 대기 상태에서 기다리라는 신호를 주는 것이며, signal은 사용이 끝났으니 자원을 사용해도 괜찮다는 신호를 주는 것입니다.

양지웅 : 모니터가 등장한 배경이 첫번째로는 사용자가 매번 wait, signal을 사용하다보면 실수를 할 수 있기 때문에, 두번째로는 바쁜 대기라고 하는 계속하여 CPU를 확인하는 작업이 불편하기 때문에 나온 방법입니다. 모니터의 경우는 모니터에 들어갈 수 있는 큐가 있고, 모니터에 들어간 후에도 우선순위에 따른 큐가 있는데 이 과정에 맞추어 작업이 진행될 프로세스가 있다면 모니터 인터페이스에 들어가 작업을 수행하게 됩니다. 내부에서 작동하는 방식은 세마포와 유사하고 주의할 점은 모니터에는 하나의 프로세스만 들어갈 수 있다는 점이 있습니다.

> 뮤텍스 락 - 동시에 접근해서는 안 되는 자원에 동시에 접근하지 못하도록 만드는 도구(자물쇠) 상호 배제를 위한 동기화 도구 acquire(임계 구역 작업 시작 lock), release(임계 구역 작업 끝 unlock)이 있으며 계속 잠겨있는지 확인하는 대기 방식을 바쁜 대기라고 함

> 세마포 - 공유 자원이 여러 개 있는 임계 구역 문제도 해결할 수 있는 동기화 도구, 임계 구역 진입 가능 프로세스 개수 (전역 변수 S), 임계 구역 들어가도 되는지, 기다려야하는지 (wait), 이제 가도 돼~(signal)

> 모니터 - 세마포에 비해 사용자가 사용하기 편리한 동기화 도구로 조건 변수를 사용하는 방법

### Q7. 1.조건 변수 x와 y가 있다고 가정하고, 스레드 A가 실행 과정에서 x.wait을 호출하면 어떻게 되나요? 2.그 다음 스레드 B는 y.wait을 호출하면 어떻게 되나요? 3.그 다음 스레드 C가 y.signal을 호출했을 때 스레드 A와 B 중 실행이 재개되는 스레드는?

양지웅 : 스레드 A가 멈춰 대기 상태로 들어가게 됩니다.

최은혜 : 스레드 B가 멈춰 대기 상태로 들어가게 됩니다.

오유진 : 스레드 B가 실행 상태로 돌아가게 됩니다.

> 1 - x가 멈춤, 2 - y가 멈춤, 3 - 스레드 B
